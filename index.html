<!doctype html>
<html lang="en-GB">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Browser Tab -->
    <title>Learning Objects - Design and Manufacture</title>
    <link rel="icon" href="https://www.imperial.ac.uk/T4Assets/favicon-196x196.png" type="image/x-icon">

    <!-- CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="styles/local.css">
    <link rel="stylesheet" type="text/css" href="styles/sidebar.css">
    <link rel="stylesheet" type="text/css" href="styles/button.css">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/5.4.2/math.min.js"></script>

    <!-- Local Scripts -->
    <script src="js/simulation.js"></script>

</head>

<body>
    <div class="wrapper">
        <!-- Sidebar  -->
        <div id="sidebar-placeholder"></div>
        <nav id="sidebar">
            <div class="sidebar-header">
                <h2 class="display-5">Learning Objects</h2>
            </div>

            <ul class="list-unstyled components">
                <h5> Main </h5>
                <li>
                    <a href="#introduction">
                        <i class="fas fa-home icon-width"></i>
                        Home
                    </a>
                </li>
                <li hidden>
                    <a href="#introduction">
                        <i class="fas fa-question icon-width"></i>
                        About
                    </a>
                </li>

                <h5> Learning Objects </h5>
                <li>
                    <a href="#introduction">
                        <i class="fas fa-cogs icon-width"></i>
                        Engineering Tolerances
                    </a>
                </li>

                <h5> Contact </h5>
                <li>
                    <a href="https://goo.gl/forms/h5ZAzeTs7GRgxXnN2" target="_blank">
                        <i class="fas fa-pencil-alt icon-width"></i>
                        Feedback
                    </a>
                </li>
                <li>
                    <a href="https://goo.gl/forms/Lbt2Biw34OHAmTOO2" target="_blank">
                        <i class="fas fa-bug icon-width"></i>
                        Report A Bug
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Page Content  -->
        <div id="content">

            <!-- Navigation Bar -->
            <div id="navbar-placeholder"></div>

            <!-- Navigation Bar -->
            <nav class="navbar navbar-expand navbar-light bg-light">

                <h1 class="display-5">Engineering Tolerances</h1>

                <div class="container-fluid">
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item" id="introduction-tab">
                                <a class="nav-link" href="#introduction">Introduction</a>
                            </li>
                            <li class="nav-item" id="shaft-tab">
                                <a class="nav-link" href="#shaft">Shaft and Spacer Drawings</a>
                            </li>
                            <li class="nav-item" id="housing-tab">
                                <a class="nav-link" href="#housing">Housing Drawings</a>
                            </li>
                            <li class="nav-item" id="simulation-tab">
                                <a class="nav-link" href="#simulation">Simulation</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>


            <div id="navbar-content">
                <div id="introduction-content">
                    <figure id="introduction-figure">
                        <img src="LearningObjects/EngineeringTolerances/figures/render.png" alt="Single-stage gearbox model" class="shadow">
                        <figcaption>Figure 1 - Plate mounted gear mechanism.</figcaption>
                    </figure>

                    <p class="text-dark font-weight-normal">
                        The aim of this Learning Object is to demonstrate how your design decisions can influence the final outcome of a manufactured product. When manufacturing parts for an assembly, the position of each component can vary according to an accepted tolerance. Certain dimensions will contribute their own error based on the variation in size between these tolerance limits. In a poorly designed component, these errors can lead to significant misalignments and poor fits in a process known as <b>tolerance stackup</b>.
                    </p>
                    <p class="text-dark font-weight-normal">
                        This exercise will cover the design of a simple mechanism, made up of two shafts, two housings and a fixed plate (see <span style="white-space: nowrap">Figure 1</span>). In this example, one side of the mechanism (<span class="font-weight-bold" style="color:rgb(41, 72, 102)">blue</span>) is designed using different types of constraints to reduce tolerance stackup and minimise misalignment of the gears. The other side (<span class="font-weight-bold" style="color:rgb(247, 151, 95)">orange</span>) is an example of a poorly designed assembly that experiences significant tolerance stackup and is susceptible to severe misalignment.
                    </p>
                    <p class="text-dark font-weight-normal">
                        The tabs in the top right corner will direct you to the relevant engineering drawings, where you will be presented with examples of good and bad engineering design. The <b>simulation</b> page can be used to demonstrate the effect of tolerance stackup by testing the statistical variation in size for each of the manufactured parts.
                    </p>
                </div>

                <div id="shaft-content" style="display:none;">
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <span class="nav-link active" href="#well-shaft-figure">Well Designed Shaft</span>
                        </li>
                        <li class="nav-item">
                            <span class="nav-link" href="#poor-shaft-figure">Poorly Designed Shaft</span>
                        </li>
                        <li class="nav-item">
                            <span class="nav-link" href="#spacer-figure">Spacer</span>
                        </li>
                    </ul>

                    <div class="card shadow custom-card-tabs">
                        <div class="card-body bg-light tab-content">
                            <figure id="well-shaft-figure" class="tab-pane active">
                                <div class="btn-settings">
                                    <button type="button" class="btn btn-info btn-circle" data-toggle="modal" data-target="#settingsModal">
                                        <span class="fas fa-cog"></span>
                                    </button>
                                </div>

                                <div class="btn-group btn-group-toggle btn-group-datum" role="group">
                                    <!-- A is the default setting -->
                                    <label id="datum-wa" class="btn btn-info btn-tear">
                                        <span class="btn-tear-text font-weight-bold">A</span>
                                        <input type="radio" name="Datum-W" value="a" checked="checked">
                                    </label>
                                    <label id="datum-wb" class="btn btn-outline-info btn-tear">
                                        <span class="btn-tear-text font-weight-bold">B</span>
                                        <input type="radio" name="Datum-W" value="b">
                                    </label>
                                </div>

                                <img src="LearningObjects/EngineeringTolerances/drawings/all_shaft_wa.png" alt="Housing Drawings" class="shadow">
                                <figcaption>Figure 2a - Shaft Engineering Drawing (Well Designed).</figcaption>
                            </figure>

                            <figure id="poor-shaft-figure" class="tab-pane">
                                <div class="btn-settings">
                                    <button type="button" class="btn btn-info btn-circle" data-toggle="modal" data-target="#settingsModal">
                                        <span class="fas fa-cog"></span>
                                    </button>
                                </div>

                                <div class="btn-group btn-group-toggle btn-group-datum" role="group">
                                    <!-- A is the default setting -->
                                    <label id="datum-pa" class="btn btn-info btn-tear">
                                        <span class="btn-tear-text font-weight-bold">A</span>
                                        <input type="radio" name="Datum-P" value="a" checked="checked">
                                    </label>
                                    <label id="datum-pb" class="btn btn-outline-info btn-tear">
                                        <span class="btn-tear-text font-weight-bold">B</span>
                                        <input type="radio" name="Datum-P" value="b">
                                    </label>
                                </div>

                                <img src="LearningObjects/EngineeringTolerances/drawings/all_shaft_pa.png" alt="Housing Drawings" class="shadow">
                                <figcaption>Figure 2b - Shaft Engineering Drawing (Poorly Designed).</figcaption>
                            </figure>

                            <figure id="spacer-figure" class="tab-pane">
                                <div class="btn-settings">
                                    <button type="button" class="btn btn-info btn-circle" data-toggle="modal" data-target="#settingsModal">
                                        <span class="fas fa-cog"></span>
                                    </button>
                                </div>
                                <img src="LearningObjects/EngineeringTolerances/drawings/all_spacer.png" alt="Housing Drawings" class="shadow">
                                <figcaption>Figure 2c - Spacer Engineering Drawing.</figcaption>
                            </figure>
                        </div>
                    </div>

                    <div class="side-content">
                        <p class="text-dark font-weight-normal">
                            The example drawings provided demonstrate how the form of a shaft can contribute to the tolerance stackup. The <b>well designed shaft</b> uses various constraint types to locate the bearings and fix the spur gear, including a <b>spacer</b> that seperates the two. The <b>poorly designed shaft</b> only uses external circlips that are referenced from a datum point.
                        </p>

                        <div class="alert alert-primary alert-white">
                            <div class="icon">
                                <span class="fas fa-info-circle"></span>
                            </div>
                            To toggle which types of stackup dimension are displayed, click the settings button and select from <i><b>all</b></i>, <i><b>axial</b></i> or <i><b>radial</b></i>.
                        </div>

                        <h4>Things to try</h4>
                        <ul>
                            <li>Try changing the datum reference point to see how it affects the axial misalignment.
                        </ul>
                    </div>
                </div>

                <div id="housing-content" style="display:none;">
                    <ul class="nav nav-tabs">
                        <li class="nav-item">
                            <span class="nav-link active" href="#well-housing-figure">Well Designed Housing</span>
                        </li>
                        <li class="nav-item">
                            <span class="nav-link" href="#poor-housing-figure">Poorly Designed Housing</span>
                        </li>
                    </ul>

                    <div class="card shadow custom-card-tabs">
                        <div class="card-body bg-light tab-content">
                            <figure id="well-housing-figure" class="tab-pane active">

                                <div class="btn-settings">
                                    <button type="button" class="btn btn-info btn-circle" data-toggle="modal" data-target="#settingsModal">
                                        <span class="fas fa-cog"></span>
                                    </button>
                                </div>

                                <img src="LearningObjects/EngineeringTolerances/drawings/all_housing_w.png" alt="Housing Drawings" class="shadow">
                                <figcaption>Figure 3a - Bearing Housing Engineering Drawing (Well Designed).</figcaption>
                            </figure>

                            <figure id="poor-housing-figure" class="tab-pane">

                                <div class="btn-settings">
                                    <button type="button" class="btn btn-info btn-circle" data-toggle="modal" data-target="#settingsModal">
                                        <span class="fas fa-cog"></span>
                                    </button>
                                </div>

                                <img src="LearningObjects/EngineeringTolerances/drawings/all_housing_p.png" alt="Housing Drawings" class="shadow">
                                <figcaption>Figure 3b - Bearing Housing Engineering Drawing (Poorly Designed).</figcaption>
                            </figure>
                        </div>
                    </div>

                    <div class="side-content">
                        <p class="text-dark font-weight-normal">
                            The design of the bearing housings also contribute to the tolerance stackup in both the axial and radial directions. The <b>well designed housing</b> uses a combination of shoulders and an endcap to locate the fixed bearing and the plate. The <b>poorly designed housing</b> uses only internal circlips to locate the bearing, and bolts to locate the plate.
                        </p>

                        <div class="alert alert-primary alert-white">
                            <div class="icon">
                                <span class="fas fa-info-circle"></span>
                            </div>
                            To toggle which types of stackup dimensions are displayed, click the settings button and select from <i><b>all</b></i>, <i><b>axial</b></i> or <i><b>radial</b></i>.
                        </div>

                        <h4>Things to try</h4>
                        <ul>
                            <li>Try comparing the radial stackup contributions for the well designed and poorly designed housings.
                        </ul>
                    </div>
                </div>

                <div id="simulation-content" style="display:none;">
                    <p class="text-dark font-weight-normal" style="padding-bottom: 10px;">
                        When manufacturing multiple components with toleranced dimensions, the variation in part size will tend to follow a <b>Gaussian Distribution</b>, where the tighter the tolerance range, the narrower the distribution and vice versa. As more and more tolerances begin to stackup, the variation in size becomes more prominent, which can lead to unwanted misalignments.
                    </p>

                    <div id="simulation-container">
                        <figure id="simulation-figure">
                            <img src="LearningObjects/EngineeringTolerances/drawings/assembly.png" alt="Assembly" class="shadow">
                            <figcaption>Figure 4 - Example Mechanism Assembly Drawing.</figcaption>
                        </figure>

                        <ul class="nav nav-tabs">
                            <li class="nav-item">
                                <span class="nav-link active" href="#distribution-model">Distribution Model</span>
                            </li>
                            <li class="nav-item" hidden>
                                <span class="nav-link" href="#stackup-contributions">Stackup Contributions</span>
                            </li>
                        </ul>

                        <div class="card shadow">
                            <div class="card-body bg-light tab-content">

                                <div id="distribution-model" class="tab-pane active">

                                    <div id="simulation-plot"></div>

                                    <div id="simulation-again" style="display:none;">
                                        <div id="data-table">
                                            <table class="table text-center">
                                                <thead>
                                                    <tr>
                                                        <th scope="col"></th>
                                                        <th scope="col">Mean (&mu;m)</th>
                                                        <th scope="col">Standard Deviation (&mu;m)</th>
                                                        <th scope="col">Rejected Units</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr id="data-row1">
                                                        <th>Well Designed</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr  id="data-row2">
                                                        <th>Poorly Designed</th>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div class="d-flex" >
                                            <button id="sim-button-again" type="button" class="btn btn-info flex-fill font-weight-bold">Run Again</button>
                                            <button id="sim-button-reset" type="button" class="btn btn-info flex-fill font-weight-bold">Reset</button>
                                        </div>
                                    </div>

                                    <div id="simulation-settings">
                                        <p class="card-text text-dark font-weight-normal">
                                            This model simulates the stackup distribution based on limits given in the engineering drawings. To test the variation in misalignment, select a direction, the number of units you wish to simulate and press run.
                                        </p><hr/>

                                        <h6 class="card-title">Datums selected:</h6>
                                        <ul>
                                            <li>Well Designed Shaft - <span id="well-datum-text" class="font-weight-bold">Datum A</span>.</li>
                                            <li>Poorly Designed Shaft - <span id="poor-datum-text" class="font-weight-bold">Datum A</span>.</li>
                                        </ul>

                                        <h6 class="card-title">Quality control:</h6>
                                        <ul>
                                            <li>Reject units with a total axial misalignment greater than <b>&plusmn; 0.1mm</b>.</li>
                                            <li>Reject units with a total radial misalignment greater than <b>&plusmn; 0.05mm</b>.</li>
                                        </ul><hr>

                                        <div id="edge-hide">
                                            <h6 class="card-title">Misalignment direction:</h6>
                                            <div class="btn-group btn-group-toggle d-flex" role="group">
                                                <!-- Axial is the default setting -->
                                                <label id="axial-sim" class="btn btn-info flex-fill"> Axial
                                                    <input type="radio" name="Direction" value="axial" checked="checked">
                                                </label>
                                                <label id="radial-sim" class="btn btn-outline-info flex-fill"> Radial
                                                    <input type="radio" name="Direction" value="radial">
                                                </label>
                                            </div><br>

                                            <h6 class="card-title">Number of units:</h6>
                                            <div class="btn-group btn-group-toggle d-flex" role="group">
                                                <!-- 100 units is the default setting -->
                                                <label id="100units" class="btn btn-info flex-fill"> 100
                                                    <input type="radio" name="Units" value="100" checked="checked">
                                                </label>
                                                <label id="1000units" class="btn btn-outline-info flex-fill"> 1,000
                                                    <input type="radio" name="Units" value="1000">
                                                </label>
                                                <label id="10000units" class="btn btn-outline-info flex-fill"> 10,000
                                                    <input type="radio" name="Units" value="10000">
                                                </label>
                                            </div><hr/>

                                            <span class="tooltip-wrapper btn-block disabled">
                                                <button id="sim-button" type="button" class="btn btn-block btn-info font-weight-bold">Run</button>
                                            </span>
                                        </div>
                                        
                                        <div id="edge-warning" hidden>
                                            <div class="alert alert-danger alert-white">
                                                <div class="icon">
                                                    <span class="fas fa-info-circle"></span>
                                                </div>
                                                <b>Warning!</b> This simulation does not support Microsoft Edge. Supported browsers: Chrome, Firefox, Safari.
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="stackup-contributions" class="tab-pane" hidden>
                                    <p class="card-text text-dark font-weight-normal">
                                        The table below outlines the main contributors to the tolerance stackup, divided into areas that are included in this simulation, not included or contribute to the oblique misalignment (<i>also not included</i>). You can hover over the different elements to highlight each area that contribute to
                                    </p>

                                    <table class="table text-center">
                                        <thead class="thead-dark">
                                            <tr>
                                                <th scope="col">Axial</th>
                                                <th scope="col">Radial</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="btn btn-light">Included</td>
                                                <td class="btn btn-light">Included</td>
                                            </tr>
                                            <tr>
                                                <td class="btn btn-light">Not Included</td>
                                                <td class="btn btn-light">Not Included</td>
                                            </tr>
                                            <tr>
                                                <td class="btn btn-light">Oblique</td>
                                                <td class="btn btn-light">Oblique</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

            <!-- Modal Content -->
            <div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title" id="settingsModalLabel">Settings</h3>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p class="text-dark font-weight-normal">
                                To change which dimensions are displayed on     each drawing, please select from the options below:
                            </p>

                            <h6 class="card-title">Toggle display:</h6>
                            <div class="btn-group btn-group-toggle d-flex" role="group">
                                <!-- All is the default setting -->
                                <label id="all-drawing" class="btn btn-info flex-fill"> All
                                    <input type="radio" name="ToggleDisplay" value="all" checked="checked">
                                </label>
                                <label id="axial-drawing" class="btn btn-outline-info flex-fill"> Axial
                                    <input type="radio" name="ToggleDisplay" value="axi">
                                </label>
                                <label id="radial-drawing" class="btn btn-outline-info flex-fill"> Radial
                                    <input type="radio" name="ToggleDisplay" value="rad">
                                </label>
                            </div> <br>

                            <ul>
                                <li><b>All</b> - All dimensions relevant to manufacture are shown.</li>
                                <li><b>Axial</b> - Only the dimensions that contribute to the axial stackup are shown.</li>
                                <li><b>Radial</b> - Only the dimensions that contribute to the radial stackup are shown.</li>
                            </ul>

                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="betaModal" tabindex="-1" role="dialog" aria-labelledby="betaModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title" id="betaModalLabel">Learning Objects Beta</h3>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p class="text-dark font-weight-normal">
                                Thank you for testing the Learning Objects Beta. Please remember to leave feedback on your experience by pressing the <b>Feedback</b> link in the sidebar.
                            </p>
                            <p class="text-dark font-weight-normal">
                                If you have any additional comments, or wish to report a bug, feel free to send an email at <a href="mailto:lt2415@ic.ac.uk">lt2415@ic.ac.uk</a>.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script type="text/javascript" src="js/DOM.js"></script>

</body>

</html>
